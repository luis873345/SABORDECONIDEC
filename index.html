<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Hacer Pedido</title>
  <style>
    body {
      background: #111;
      color: white;
      font-family: sans-serif;
      padding: 30px;
      text-align: center;
    }
    input, textarea {
      display: block;
      margin: 10px auto;
      padding: 10px;
      width: 300px;
      border-radius: 5px;
      border: none;
    }
    button {
      padding: 10px 20px;
      background: orange;
      color: black;
      font-weight: bold;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: darkorange;
    }
    .pedido {
      background: #222;
      margin: 15px auto;
      padding: 10px;
      width: 90%;
      max-width: 400px;
      text-align: left;
      border-left: 5px solid orange;
      border-radius: 10px;
    }
    h2 {
      color: orange;
      margin-top: 50px;
    }
  </style>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>

  <h1>Hacer Pedido</h1>

  <input id="nombre" placeholder="Tu nombre" />
  <textarea id="pedido" placeholder="¬øQu√© vas a pedir?"></textarea>
  <input id="direccion" placeholder="Tu direcci√≥n" />
  <button onclick="enviarPedido()">Enviar Pedido</button>

  <h2>üìã Pedidos Recibidos</h2>
  <div id="lista-pedidos"></div>

  <script>
    // üîß CONFIGURA TU FIREBASE AQU√ç
    const firebaseConfig = {
      apiKey: "TU_API_KEY",
      authDomain: "TU_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://TU_PROJECT_ID-default-rtdb.firebaseio.com",
      projectId: "TU_PROJECT_ID",
      storageBucket: "TU_PROJECT_ID.appspot.com",
      messagingSenderId: "TU_SENDER_ID",
      appId: "TU_APP_ID"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Cargar datos temporales al iniciar
    window.onload = function () {
      document.getElementById("nombre").value = localStorage.getItem("temp_nombre") || "";
      document.getElementById("pedido").value = localStorage.getItem("temp_pedido") || "";
      document.getElementById("direccion").value = localStorage.getItem("temp_direccion") || "";
      mostrarPedidos();
    };

    // Guardar campos temporalmente
    ["nombre", "pedido", "direccion"].forEach(id => {
      document.getElementById(id).addEventListener("input", () => {
        localStorage.setItem(`temp_${id}`, document.getElementById(id).value);
      });
    });

    // Enviar pedido
    function enviarPedido() {
      const nombre = document.getElementById("nombre").value.trim();
      const pedido = document.getElementById("pedido").value.trim();
      const direccion = document.getElementById("direccion").value.trim();

      if (!nombre || !pedido || !direccion) {
        alert("Por favor llena todos los campos.");
        return;
      }

      const nuevoPedido = {
        nombre,
        pedido,
        direccion,
        fecha: new Date().toLocaleString()
      };

      const ref = db.ref("pedidos");
      ref.push(nuevoPedido);

      // Limpiar campos
      document.getElementById("nombre").value = "";
      document.getElementById("pedido").value = "";
      document.getElementById("direccion").value = "";
      localStorage.clear();

      alert("‚úÖ Pedido enviado con √©xito.");
    }

    // Mostrar pedidos en la misma p√°gina
    function mostrarPedidos() {
      const ref = db.ref("pedidos");
      ref.on("value", snapshot => {
        const contenedor = document.getElementById("lista-pedidos");
        contenedor.innerHTML = "";
        const pedidos = snapshot.val();
        if (pedidos) {
          Object.values(pedidos).forEach(p => {
            const div = document.createElement("div");
            div.className = "pedido";
            div.innerHTML = `<strong>${p.nombre}</strong><br>
                             ${p.pedido}<br>
                             üìç ${p.direccion}<br>
                             üïí ${p.fecha}`;
            contenedor.appendChild(div);
          });
        }
      });
    }
  </script>
</body>
</html>





  
